import{B as y,C as Y,b as M,d as q,h as I}from"./chunk-FUA22B34.js";import{A as me,b as Z,c as ee,r as te,s as oe,t as re,u as ie,v as ne,z as ae}from"./chunk-HHXRWK4K.js";import{A as C,C as j,F as k,G as O,O as $,P as W,g as w,t as G,u as s,w as A,wa as H,x as B,xa as J,ya as K,z as U,za as Q}from"./chunk-PEJCXX6M.js";import{a as le}from"./chunk-HSET2XFC.js";import{r as X}from"./chunk-5VP6XPOA.js";import{Ab as S,Ac as R,Ba as P,Hc as V,Ob as l,Pb as p,T as x,Ub as c,Vb as n,Wb as m,Xb as u,cc as T,gc as E,ib as r,ic as g,jc as D,kc as L,pc as v,qa as f,ub as _,uc as a,wa as F,wc as b,xa as N}from"./chunk-ZDOPM4TA.js";var fe=["*"],h=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-bordered-card"]],ngContentSelectors:fe,decls:1,vars:0,template:function(e,i){e&1&&(D(),L(0))},styles:["[_nghost-%COMP%]{display:block;padding:20px;margin:20px;border:1px solid lightgray;overflow:hidden}"]})};function pe(t,o){return e=>{let i=e.parent;if(i&&o){let z=i.get(t);return z&&z.updateValueAndValidity(),null}let d=i?.get(t);return i&&d&&e.value===d.value?null:{matching:!0}}}function ue(t,o){if(t&1&&(n(0,"nz-form-item")(1,"nz-form-label",9),a(2,"Name"),m(),n(3,"nz-form-control",4),u(4,"input",10),m()()),t&2){g();let e=v(18);r(3),c("nzErrorTip",e)}}function ge(t,o){if(t&1&&(n(0,"nz-form-item")(1,"nz-form-label",11),a(2,"Confirm Password"),m(),n(3,"nz-form-control",4),u(4,"input",12),m()()),t&2){g();let e=v(18);r(3),c("nzErrorTip",e)}}function Ce(t,o){t&1&&a(0," Field is Required ")}function _e(t,o){t&1&&a(0," Email not valid ")}function ve(t,o){t&1&&a(0," Two passwords that you enter is inconsistent! ")}function he(t,o){if(t&1&&a(0),t&2){let e=g().$implicit;b(" Max ",e.errors.maxlength.requiredLength," symbols ")}}function ze(t,o){if(t&1&&a(0),t&2){let e=g().$implicit;b(" Min ",e.errors.minlength.requiredLength," symbols ")}}function xe(t,o){if(t&1&&(l(0,Ce,1,0),l(1,_e,1,0),l(2,ve,1,0),l(3,he,1,1),l(4,ze,1,1)),t&2){let e=o.$implicit;p(e.errors!=null&&e.errors.required?0:-1),r(),p(e.errors!=null&&e.errors.email?1:-1),r(),p(e.errors!=null&&e.errors.matching?2:-1),r(),p(e.errors!=null&&e.errors.maxlength?3:-1),r(),p(e.errors!=null&&e.errors.minlength?4:-1)}}var se=class t{api=f(y);destroyRef=f(P);route=f(M);userService=f(Y);router=f(q);isRegisterForm=!1;formValidationErrors={name:"",email:"",password:"",repeatPassword:""};form=new U({email:new C("",[s.required,s.email]),password:new C("")});constructor(){this.isRegisterForm=this.route.snapshot.data.register,this.isRegisterForm&&(this.form.addControl("name",new C("",[s.required])),this.form.addControl("confirmPassword",new C("",[s.required,pe("password")])),this.form.get("password")?.addValidators([s.required,s.minLength(6),s.maxLength(25)]))}onSubmit(){this.isRegisterForm?this.api.post("auth/register",this.form.value).pipe(x(1)).pipe(w(this.destroyRef)).subscribe(o=>{this.router.navigate(["/login"]).then()}):this.api.post("auth/login",this.form.value).pipe(x(1)).pipe(w(this.destroyRef)).subscribe(o=>{this.userService.loginUser(o),this.router.navigate(["/"]).then()})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-login-page"]],features:[R([y])],decls:19,vars:6,consts:[["errorTpl",""],["centerContent",""],["nz-form","","nzLayout","vertical",1,"form",3,"ngSubmit","formGroup"],["nzFor","email"],[3,"nzErrorTip"],["nz-input","","formControlName","email","id","email","placeholder","Email"],["nzFor","password"],["nz-input","","type","password","placeholder","Password","formControlName","password","id","password"],["nz-button","","nzType","primary","type","submit",3,"disabled"],["nzFor","name"],["nz-input","","formControlName","name","id","name","placeholder","Name"],["nzFor","confirmPassword"],["nz-input","","type","password","formControlName","confirmPassword","placeholder","Confirm Password","id","confirmPassword"]],template:function(e,i){if(e&1){let d=T();n(0,"app-content-wrapper",1)(1,"app-bordered-card")(2,"form",2),E("ngSubmit",function(){return F(d),N(i.onSubmit())}),l(3,ue,5,1,"nz-form-item"),n(4,"nz-form-item")(5,"nz-form-label",3),a(6,"Email"),m(),n(7,"nz-form-control",4),u(8,"input",5),m()(),n(9,"nz-form-item")(10,"nz-form-label",6),a(11,"Password"),m(),n(12,"nz-form-control",4),u(13,"input",7),m()(),l(14,ge,5,1,"nz-form-item"),n(15,"button",8),a(16," Submit "),m()()()(),S(17,xe,5,5,"ng-template",null,0,V)}if(e&2){let d=v(18);r(2),c("formGroup",i.form),r(),p(i.isRegisterForm?3:-1),r(4),c("nzErrorTip",d),r(5),c("nzErrorTip",d),r(2),p(i.isRegisterForm?14:-1),r(),c("disabled",i.form.invalid)}},dependencies:[W,j,G,A,B,k,O,Q,K,H,J,ne,ee,Z,oe,te,ie,re,me,ae,I,$,le,X,h],styles:["[_nghost-%COMP%]{height:100%}.form[_ngcontent-%COMP%]{width:300px;display:flex;gap:5px;flex-direction:column}"]})};export{se as LoginPageComponent};
